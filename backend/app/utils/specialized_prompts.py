"""
Specialized Prompts Module

This module contains specialized prompts for different task types.
These prompts are more detailed and task-specific than the base templates.
"""

# Dictionary of available prompt variants for each task type
AVAILABLE_PROMPT_VARIANTS = {
    "task_13": ["basic", "detailed", "with_examples", "image_examples", "with_solution"],
    "task_14": ["basic", "detailed", "with_examples", "image_examples", "with_solution"],
    "task_15": ["basic", "detailed", "with_solution"],
    "task_16": ["basic", "detailed", "with_solution", "image_examples"],
    "task_17": ["basic", "detailed", "with_solution", "image_examples"],
    "task_18": ["basic", "detailed", "with_solution", "image_examples"],
    "task_19": ["basic", "detailed", "with_solution", "image_examples"]
}

# Default prompt variant to use for each task type
DEFAULT_PROMPT_VARIANTS = {
    "task_13": "detailed",
    "task_14": "detailed",
    "task_15": "detailed",
    "task_16": "detailed"
}

# Specialized prompts for Task 13

TASK_13_DETAILED_PROMPT = """
Проанализируй решение задания 13 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 13
- 2 балла: Обоснованно получены верные ответы в обоих пунктах
- 1 балл: Обоснованно получен верный ответ в пункте а) ИЛИ получены неверные ответы из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения обоих пунктов
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое

## Инструкция по проверке пункта а)
1. Проверь корректность преобразования исходного уравнения:
   - Правильность раскрытия скобок и приведения подобных
   - Корректность применения тригонометрических, логарифмических или показательных формул
   - Правильность группировки слагаемых и вынесения общих множителей
2. Проверь метод решения уравнения:
   - Корректность разбиения на случаи (если применяется)
   - Правильность решения каждого случая
   - Отсутствие потери корней или появления посторонних корней
3. Проверь полноту и правильность записи ответа:
   - Все корни должны быть найдены и записаны в правильной форме
   - Формулы для серий корней должны быть записаны корректно с указанием области определения параметра

## Инструкция по проверке пункта б)
1. Проверь метод отбора корней на заданном отрезке:
   - При использовании тригонометрической окружности:
     * Должны быть отмечены и подписаны концы отрезка
     * Должна быть выделена дуга, соответствующая отрезку
     * Должны быть отмечены и подписаны все корни на этой дуге
   - При использовании решения неравенств:
     * Корректность составления неравенств
     * Правильность решения неравенств
     * Правильность нахождения целых значений параметра
2. Проверь правильность найденных корней:
   - Все найденные корни должны принадлежать заданному отрезку
   - Все корни, принадлежащие отрезку, должны быть найдены
   - Корни должны быть записаны в правильной форме

## Типичные ошибки, на которые следует обратить внимание
1. Неверное решение уравнения в пункте а):
   - Для тригонометрических уравнений:
     * Ошибки в формулах приведения
     * Неполное решение (пропуск некоторых корней)
     * Ошибки при нахождении арксинуса, арккосинуса и т.д.
   - Для показательных и логарифмических уравнений:
     * Ошибки при логарифмировании или потенцировании
     * Неучет ОДЗ для логарифмических уравнений
     * Ошибки при работе с разными основаниями степеней или логарифмов

2. Ошибки при отборе корней в пункте б):
   - Неправильное определение принадлежности корня заданному отрезку
   - Ошибки при вычислении конкретных значений корней
   - Указание корней, не являющихся решениями исходного уравнения
   - Пропуск корней, принадлежащих отрезку
   - Дублирующая запись корней (указание одного и того же корня несколько раз)

## Примеры типичных ошибок и их оценка:

### Пример 1: Ошибка в отборе корней (оценка: 1 балл)
Ученик правильно решил уравнение в пункте а), получив все корни в общем виде, но при отборе корней на заданном отрезке допустил ошибку: указал число, которое не является корнем уравнения, или пропустил корень, принадлежащий отрезку.

### Пример 2: Ошибка в решении уравнения (оценка: 0 баллов)
Ученик неверно решил уравнение в пункте а), например, неправильно нашел значение арккосинуса, неправильно применил свойства логарифмов или допустил ошибку в формуле общего вида корней. Это привело к неверным ответам в обоих пунктах.

### Пример 3: Вычислительная ошибка (оценка: 1 балл)
Ученик использовал правильный метод решения в обоих пунктах, но допустил вычислительную ошибку (например, при делении или упрощении выражения), что привело к неверному ответу. При этом все шаги решения выполнены верно.

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадают ли ответы ученика с правильными ответами
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании тригонометрических соотношений или свойств логарифмов/показательных функций

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на 1 балл.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на 0 баллов.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# New prompt specifically designed for use with concrete image examples
TASK_13_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 13 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 13
- 2 балла: Обоснованно получены верные ответы в обоих пунктах
- 1 балл: Обоснованно получен верный ответ в пункте а) ИЛИ получены неверные ответы из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения обоих пунктов
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Инструкция по проверке тригонометрических уравнений
1. В пункте а) проверь:
   - Правильность преобразования исходного уравнения
   - Корректность метода решения (замена переменной, разложение на множители и т.д.)
   - Полноту получения всех корней уравнения
   - Правильность формул для общего вида корней

2. В пункте б) проверь:
   - Правильность метода отбора корней на заданном отрезке
   - Корректность вычислений при подстановке границ отрезка в формулы
   - Правильность использования тригонометрической окружности (если применяется)
   - Точность указания конкретных значений корней на отрезке

## Типичные ошибки, на которые следует обратить внимание
1. Неверное решение тригонометрического уравнения в пункте а):
   - Ошибки в формулах приведения
   - Неполное решение (пропуск некоторых корней)
   - Ошибки при нахождении арксинуса, арккосинуса и т.д.

2. Ошибки при отборе корней в пункте б):
   - Неправильное определение принадлежности корня заданному отрезку
   - Ошибки при вычислении конкретных значений корней
   - Указание корней, не являющихся решениями исходного уравнения
   - Пропуск корней, принадлежащих отрезку

## Примеры типичных ошибок и их оценка:

### Пример 1: Ошибка в отборе корней (оценка: 1 балл)
Ученик правильно решил уравнение в пункте а), получив все корни в общем виде, но при отборе корней на заданном отрезке допустил ошибку: указал число, которое не является корнем тригонометрического уравнения, или пропустил корень, принадлежащий отрезку.

### Пример 2: Ошибка в решении уравнения (оценка: 0 баллов)
Ученик неверно решил тригонометрическое уравнение в пункте а), например, неправильно нашел значение арккосинуса или допустил ошибку в формуле общего вида корней. Это привело к неверным ответам в обоих пунктах.

### Пример 3: Вычислительная ошибка (оценка: 1 балл)
Ученик использовал правильный метод решения в обоих пунктах, но допустил вычислительную ошибку (например, при делении или упрощении выражения), что привело к неверному ответу. При этом все шаги решения выполнены верно.

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадают ли ответы ученика с правильными ответами
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Specialized prompts for Task 14

TASK_14_DETAILED_PROMPT = """

Проанализируй решение задания 14 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 14
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б
ИЛИ
имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а,
ИЛИ
при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки,
ИЛИ
обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания

### Основные принципы:
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Внимательно проверяй, соответствует ли решение условию задачи (например, лежит ли точка K на боковом ребре, а не на стороне основания)

### Критерии для оценки в 3 балла:
- Если ученик верно доказал утверждение в пункте а) И обоснованно получил верный ответ в пункте б), ставь 3 балла
- Если в решении есть небольшие недочеты, но они не влияют на правильность ответа, это не должно снижать оценку

### Критерии для оценки в 2 балла:
- Если ученик обоснованно получил верный ответ ТОЛЬКО в пункте б), ставь 2 балла
- ИЛИ если ученик верно доказал утверждение в пункте а) и при обоснованном решении пункта б) получил неверный ответ из-за арифметической ошибки, ставь 2 балла

### Критерии для оценки в 1 балл:
- Если ученик верно доказал ТОЛЬКО утверждение в пункте а), ставь 1 балл
- ИЛИ если при обоснованном решении пункта б) получен неверный ответ из-за арифметической ошибки, ставь 1 балл
- ИЛИ если ученик обоснованно получил верный ответ в пункте б) с использованием утверждения пункта а), при этом пункт а) не выполнен, ставь 1 балл

### Критерии для оценки в 0 баллов:
- Если решение не соответствует ни одному из критериев для 1, 2 или 3 баллов
- Если в решении есть грубые математические ошибки, которые не являются арифметическими
- Если решалась другая задача (например, точка K лежит на стороне основания, а не на боковом ребре)

## Инструкция по проверке пункта а)
1. Проверь корректность доказательства геометрического факта:
   - Правильность использования определений и теорем стереометрии
   - Логическую последовательность шагов доказательства
   - Обоснованность каждого шага
   - Полноту доказательства (все ли необходимые шаги выполнены)
2. Обрати внимание на типичные методы доказательства в стереометрии:
   - Использование векторов и координатного метода
   - Применение признаков параллельности и перпендикулярности
   - Использование подобия и равенства треугольников
   - Применение теорем о параллельных и перпендикулярных плоскостях
3. Для доказательства параллельности плоскости и прямой проверь:
   - Доказано ли, что прямая параллельна какой-либо прямой, лежащей в плоскости
   - Корректно ли использованы свойства параллельности в пространстве

## Инструкция по проверке пункта б)
1. Проверь метод нахождения геометрической величины:
   - Правильность построения сечений (если требуется)
   - Корректность применения формул для вычисления длин, углов, площадей или объемов
   - Правильность использования тригонометрических соотношений
   - Обоснованность каждого шага вычислений
2. Проверь правильность вычислений:
   - Корректность арифметических операций
   - Правильность работы с корнями, дробями и иррациональными числами
   - Правильность упрощения итогового выражения
3. При нахождении длины отрезка проверь:
   - Правильно ли определены точки пересечения плоскости с гранями
   - Корректно ли использованы свойства подобия треугольников
   - Верно ли найдены пропорциональные отношения

## Типичные ошибки, на которые следует обратить внимание
1. В пункте а):
   - Неполное доказательство (пропуск важных шагов)
   - Использование недоказанных фактов без обоснования
   - Логические ошибки в цепочке рассуждений
   - Неправильное применение теорем стереометрии
2. В пункте б):
   - Ошибки при построении сечений
   - Неправильное применение формул
   - Ошибки в тригонометрических вычислениях
   - Арифметические ошибки при расчетах

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В решении имеется верное доказательство утверждения пункта а) и обоснованно получен верный ответ в пункте б). В пункте а) корректно доказана параллельность плоскости и прямой с использованием признаков параллельности. В пункте б) правильно найдена длина отрезка, по которому плоскость пересекает грань.

### Пример 2 (оценка: 1 балл)
В решении имеется верное доказательство утверждения пункта а), но решение пункта б) отсутствует. Ученик корректно доказал геометрический факт, используя векторный метод или признаки параллельности.

### Пример 3 (оценка: 0 баллов)
В решении решалась другая задача: точка K лежит на стороне основания, а не на боковом ребре. Решение не соответствует условию задачи.

## ВАЖНО: Тщательно проверяй ответы!
Особое внимание удели проверке ответов ученика. Убедись, что:
- Доказательство в пункте а) полное и корректное
- Вычисления в пункте б) выполнены правильно
- Итоговый ответ в пункте б) верный

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_14_WITH_EXAMPLES_PROMPT = """

Проанализируй решение задания 14 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 14
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б
ИЛИ
имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а,
ИЛИ
при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки,
ИЛИ
обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## Инструкция по проверке пункта а)
1. Проверь корректность доказательства геометрического факта:
   - Правильность использования определений и теорем стереометрии
   - Логическую последовательность шагов доказательства
   - Обоснованность каждого шага
   - Полноту доказательства (все ли необходимые шаги выполнены)
2. Обрати внимание на типичные методы доказательства в стереометрии:
   - Использование векторов и координатного метода
   - Применение признаков параллельности и перпендикулярности
   - Использование подобия и равенства треугольников
   - Применение теорем о параллельных и перпендикулярных плоскостях

## Инструкция по проверке пункта б)
1. Проверь метод нахождения геометрической величины:
   - Правильность построения сечений (если требуется)
   - Корректность применения формул для вычисления длин, углов, площадей или объемов
   - Правильность использования тригонометрических соотношений
   - Обоснованность каждого шага вычислений
2. Проверь правильность вычислений:
   - Корректность арифметических операций
   - Правильность работы с корнями, дробями и иррациональными числами
   - Правильность упрощения итогового выражения

## Типичные ошибки, на которые следует обратить внимание
1. В пункте а):
   - Неполное доказательство (пропуск важных шагов)
   - Использование недоказанных фактов без обоснования
   - Логические ошибки в цепочке рассуждений
   - Неправильное применение теорем стереометрии
2. В пункте б):
   - Ошибки при построении сечений
   - Неправильное применение формул
   - Ошибки в тригонометрических вычислениях
   - Арифметические ошибки при расчетах

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В этом решении имеется верное доказательство утверждения пункта а) и обоснованно получен верный ответ в пункте б). В пункте а) корректно доказана параллельность плоскости и прямой с использованием признаков параллельности. В пункте б) правильно найдена длина отрезка, по которому плоскость пересекает грань.

### Пример 2 (оценка: 2 балла)
В этом решении обоснованно получен верный ответ в пункте б), но отсутствует решение пункта а). Ученик правильно построил сечение и вычислил требуемую величину, используя формулы стереометрии и тригонометрии.

### Пример 3 (оценка: 1 балл)
В этом решении имеется верное доказательство утверждения пункта а), но решение пункта б) отсутствует. Ученик корректно доказал геометрический факт, используя векторный метод и признаки параллельности.

### Пример 4 (оценка: 0 баллов)
В этом решении решалась другая задача: точка K лежит на стороне основания, а не на боковом ребре. Решение не соответствует условию задачи.

## Требования к анализу
Твой анализ должен содержать:
1. Подробный разбор доказательства в пункте а) с указанием всех правильных шагов и ошибок
2. Подробный разбор решения пункта б) с указанием всех правильных шагов и ошибок
3. Итоговую оценку (0, 1, 2 или 3 балла) с подробным обоснованием
4. Рекомендации по исправлению ошибок (если есть)

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# New prompt specifically designed for use with concrete image examples
TASK_14_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 14 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 14
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б
ИЛИ
имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а,
ИЛИ
при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки,
ИЛИ
обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания

### Основные принципы:
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление

### Критерии для оценки в 3 балла:
- Если ученик верно доказал утверждение в пункте а) И обоснованно получил верный ответ в пункте б), ставь 3 балла
- Если в решении есть небольшие недочеты, но они не влияют на правильность ответа, это не должно снижать оценку

### Критерии для оценки в 2 балла:
- Если ученик обоснованно получил верный ответ ТОЛЬКО в пункте б), ставь 2 балла
- ИЛИ если ученик верно доказал утверждение в пункте а) и при обоснованном решении пункта б) получил неверный ответ из-за арифметической ошибки, ставь 2 балла

### Критерии для оценки в 1 балл:
- Если ученик верно доказал ТОЛЬКО утверждение в пункте а), ставь 1 балл
- ИЛИ если при обоснованном решении пункта б) получен неверный ответ из-за арифметической ошибки, ставь 1 балл
- ИЛИ если обоснованно получен верный ответ в пункте б) с использованием утверждения пункта а), при этом пункт а) не выполнен, ставь 1 балл

### Критерии для оценки в 0 баллов:
- Если решение не соответствует ни одному из критериев, перечисленных выше, ставь 0 баллов
- Если доказательство пункта а) содержит логические ошибки (круговые рассуждения), ставь 0 баллов за пункт а)

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В решении правильно доказано утверждение пункта а) с использованием свойств вписанных фигур и корректно найдена геометрическая величина в пункте б). Все шаги доказательства обоснованы, вычисления выполнены верно.

### Пример 2 (оценка: 2 балла)
В решении правильно доказано утверждение пункта а), но при решении пункта б) допущена арифметическая ошибка, приведшая к неверному ответу. Метод решения пункта б) выбран верно, но ошибка в вычислениях привела к неверному числовому результату.

### Пример 3 (оценка: 2 балла)
В решении не доказано или неверно доказано утверждение пункта а), но обоснованно получен верный ответ в пункте б). Все вычисления в пункте б) выполнены корректно, и получен правильный числовой ответ.

### Пример 4 (оценка: 1 балл)
В решении правильно доказано утверждение пункта а), но решение пункта б) отсутствует или выполнено полностью неверно. Доказательство пункта а) содержит все необходимые обоснования и логические шаги.

### Пример 5 (оценка: 1 балл)
В решении не доказано утверждение пункта а), но при решении пункта б) использовано это утверждение и получен верный ответ. Решение пункта б) математически корректно и опирается на утверждение из пункта а).

### Пример 6 (оценка: 0 баллов)
В решении неверно доказано утверждение пункта а) и неверно решен пункт б). Доказательство содержит логические ошибки, а вычисления в пункте б) приводят к неверному ответу.

### Пример 7 (оценка: 0 баллов)
В решении пункта а) содержится круговое рассуждение: ученик использует параллельность прямых BH и ED (или следствия из этой параллельности) для доказательства самой параллельности. Такое доказательство некорректно, даже если пункт б) решен верно.

### Пример 8 (оценка: 0 баллов)
В решении пункта а) ученик опирается на условие из пункта б) (использует значение угла BCD = 120°), что делает доказательство некорректным. Доказательство пункта а) должно быть общим, без использования конкретных числовых значений из пункта б).

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ доказательства с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ вычислений с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 13 - Detailed prompt with task description + full correct solution + student solution
TASK_13_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 13 и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 13
- 2 балла: Обоснованно получены верные ответы в обоих пунктах
- 1 балл: Обоснованно получен верный ответ в пункте а) ИЛИ получены неверные ответы из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения обоих пунктов
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Разные подходы к решению могут быть верными, если они математически обоснованы и приводят к правильному ответу

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для понимания задачи и правильного ответа
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Помни, что решение ученика может отличаться от эталонного по подходу и оформлению. Это нормально!
- Главное, чтобы решение было математически верным и приводило к правильному ответу
- Оценивай математическую корректность, а не точное совпадение с эталоном
- Проверь, что ответ ученика математически верный
- Если ответ ученика неверный, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке

## Инструкция по проверке пункта а)
1. Проверь метод решения тригонометрического уравнения:
   - Корректность преобразований
   - Правильность применения формул
   - Полноту решения (все ли необходимые шаги выполнены)
2. Проверь правильность нахождения корней:
   - Все корни должны быть найдены и записаны в правильной форме
   - Формулы для серий корней должны быть записаны корректно с указанием области определения параметра

## Инструкция по проверке пункта б)
1. Проверь метод отбора корней на заданном отрезке:
   - При использовании тригонометрической окружности:
     * Должны быть отмечены и подписаны концы отрезка
     * Должна быть выделена дуга, соответствующая отрезку
     * Должны быть отмечены и подписаны все корни на этой дуге
   - При использовании решения неравенств:
     * Корректность составления неравенств
     * Правильность решения неравенств
     * Правильность нахождения целых значений параметра

## Типичные ошибки, на которые следует обратить внимание
1. Неверное решение уравнения в пункте а):
   - Для тригонометрических уравнений:
     * Ошибки в формулах приведения
     * Неполное решение (пропуск некоторых корней)
     * Ошибки при нахождении арксинуса, арккосинуса и т.д.
   - Для показательных и логарифмических уравнений:
     * Ошибки при логарифмировании или потенцировании
     * Неучет ОДЗ для логарифмических уравнений
     * Ошибки при работе с разными основаниями степеней или логарифмов

2. Ошибки при отборе корней в пункте б):
   - Неправильное определение принадлежности корня заданному отрезку
   - Ошибки при вычислении конкретных значений корней
   - Указание корней, не являющихся решениями исходного уравнения
   - Пропуск корней, принадлежащих отрезку

## Примеры типичных ошибок и их оценка:

### Пример 1: Ошибка в отборе корней (оценка: 1 балл)
Ученик правильно решил уравнение в пункте а), получив все корни в общем виде, но при отборе корней на заданном отрезке допустил ошибку: указал число, которое не является корнем уравнения, или пропустил корень, принадлежащий отрезку.

### Пример 2: Ошибка в решении уравнения (оценка: 0 баллов)
Ученик неверно решил уравнение в пункте а), например, неправильно нашел значение арккосинуса, неправильно применил свойства логарифмов или допустил ошибку в формуле общего вида корней. Это привело к неверным ответам в обоих пунктах.

### Пример 3: Вычислительная ошибка (оценка: 1 балл)
Ученик использовал правильный метод решения в обоих пунктах, но допустил вычислительную ошибку (например, при делении или упрощении выражения), что привело к неверному ответу. При этом все шаги решения выполнены верно.

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадают ли ответы ученика с правильными ответами
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании тригонометрических соотношений или свойств логарифмов/показательных функций

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на 1 балл.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на 0 баллов.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Specialized prompts for Task 16

TASK_16_DETAILED_PROMPT = """
Проанализируй решение задания 16 (текстовая задача с экономическим содержанием) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 16
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Верно построена математическая модель
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- 1 балл можно выставлять в тех случаях, когда сюжетное условие задачи верно сведено к решению математической задачи, но именно к решению, а не к отдельному неравенству, набору уравнений или функции
- Представленный текст должен включать описание того, как построена модель
- Один и тот же сюжет может быть успешно сведен к различным математическим моделям и доведен до верного ответа

## Инструкция по проверке экономических задач
1. Проверь корректность построения математической модели:
   - Правильность введения переменных
   - Корректность составления уравнений/неравенств на основе условия задачи
   - Учет всех условий задачи в математической модели
   - Правильность интерпретации экономических терминов (проценты, кредит, вклад и т.д.)

2. Проверь правильность решения математической модели:
   - Корректность алгебраических преобразований
   - Правильность работы с процентами и дробями
   - Отсутствие вычислительных ошибок
   - Правильность итогового ответа

3. Обрати внимание на типичные ошибки в экономических задачах:
   - Неверная интерпретация процентов (например, путаница между "увеличение на X%" и "увеличение в X раз")
   - Ошибки при составлении уравнений для кредитов/вкладов с изменяющимися условиями
   - Неучет всех платежей/выплат в общей сумме
   - Арифметические ошибки при работе с большими числами

## Примеры оценивания

### Пример 1 (оценка: 2 балла)
В решении правильно введены переменные (сумма кредита и ежегодный платеж), корректно составлены уравнения на основе условий задачи, учтены все особенности (увеличение долга на проценты, частичное погашение), проведены верные вычисления и получен правильный ответ.

### Пример 2 (оценка: 1 балл)
В решении правильно построена математическая модель: введены переменные, составлены корректные уравнения на основе условий задачи, но допущена вычислительная ошибка, приведшая к неверному ответу.

### Пример 3 (оценка: 0 баллов)
В решении неверно интерпретированы условия задачи (например, неправильно учтено увеличение долга на проценты), что привело к построению некорректной математической модели и, как следствие, к неверному ответу.

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответ ученика с правильным!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное построение математической модели, неверная интерпретация условий задачи, неправильное применение экономических понятий

Если ученик построил верную математическую модель, но допустил вычислительную ошибку - это соответствует критерию на 1 балл.
Если ученик допустил концептуальные ошибки при построении модели - это обычно соответствует критерию на 0 баллов.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ построения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при построении модели]

### Анализ решения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при решении модели]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_16_BASIC_PROMPT = """
Проанализируй решение задания 16 (текстовая задача с экономическим содержанием).

Задача: {task_description}

Критерии оценки:
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Верно построена математическая модель
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Максимальный балл: 2

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ построения математической модели
2. Анализ решения и вычислений
3. Итоговую оценку (0, 1 или 2 балла)
4. Обоснование выставленной оценки

ВАЖНО: Раздел с итоговой оценкой ОБЯЗАТЕЛЬНО оформи в формате:
### Итоговая оценка
[Оценка: X баллов]
где X - это число 0, 1 или 2
"""

# Task 16 - Detailed prompt with task description + full correct solution + student solution
TASK_16_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 16 (текстовая задача с экономическим содержанием) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 16
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Верно построена математическая модель
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Сравни решение ученика с верным решением, которое предоставлено в качестве эталона
- Проверь, правильно ли ученик выполнил все ключевые шаги решения
- Если ученик использовал другой подход, оцени его корректность и соответствие критериям

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Особое внимание обрати на правильность построения математической модели

## Инструкция по проверке экономической задачи
1. Проверь понимание условия задачи:
   - Правильно ли ученик интерпретировал условие
   - Корректно ли определены переменные и их взаимосвязи
   - Учтены ли все условия задачи
2. Проверь построение математической модели:
   - Правильность составления уравнений или неравенств
   - Корректность применения экономических формул (кредит, вклад, процент и т.д.)
   - Полноту модели (учтены ли все условия задачи)
3. Проверь решение математической модели:
   - Правильность алгебраических преобразований
   - Корректность вычислений
   - Правильность работы с процентами и дробями
4. Проверь интерпретацию результата:
   - Соответствие ответа вопросу задачи
   - Правильность единиц измерения
   - Экономический смысл полученного результата

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное построение математической модели, неверная интерпретация условий задачи, неправильное применение экономических понятий

Если ученик допустил только вычислительные ошибки, но математическая модель построена верно - это может соответствовать критерию на 1 балл.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на 0 баллов.

## Примеры оценивания

### Пример 1 (оценка: 2 балла)
В решении правильно введены переменные (сумма кредита и ежегодный платеж), корректно составлены уравнения на основе условий задачи, учтены все особенности (увеличение долга на проценты, частичное погашение), проведены верные вычисления и получен правильный ответ.

### Пример 2 (оценка: 1 балл)
В решении правильно построена математическая модель: введены переменные, составлены корректные уравнения на основе условий задачи, но допущена вычислительная ошибка, приведшая к неверному ответу.

### Пример 3 (оценка: 0 баллов)
В решении неверно интерпретированы условия задачи (например, неправильно учтено увеличение долга на проценты), что привело к построению некорректной математической модели и, как следствие, к неверному ответу.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ построения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при построении модели]

### Анализ решения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при решении модели]

### Сравнение с верным решением
[Сравнение подхода ученика с эталонным решением, указание на ключевые различия]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# New prompt specifically designed for use with concrete image examples
TASK_16_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 16 (текстовая задача с экономическим содержанием) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 16
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Верно построена математическая модель
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое

## Особенности проверки экономических задач
1. Проверь правильность построения математической модели:
   - Корректность введения переменных
   - Правильность составления уравнений/неравенств
   - Учет всех условий задачи в модели
   - Корректность применения экономических формул (кредит, вклад, процент и т.д.)
2. Проверь правильность решения модели:
   - Корректность алгебраических преобразований
   - Правильность вычислений
   - Корректность работы с процентами и дробями
   - Правильность интерпретации полученного результата

## Типичные ошибки, на которые следует обратить внимание
1. Ошибки в построении модели:
   - Неверное понимание условий задачи
   - Неучет некоторых условий
   - Неверное применение экономических формул
2. Ошибки в решении:
   - Арифметические ошибки
   - Ошибки при работе с процентами
   - Неверное округление
   - Ошибки при решении уравнений/неравенств
3. Ошибки в интерпретации:
   - Неверное истолкование полученного результата
   - Ответ не соответствует вопросу задачи

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ построения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при построении модели]

### Анализ решения математической модели
[Подробный анализ с указанием правильных шагов и ошибок при решении модели]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Define dictionaries for task prompts

# Task 13 prompts dictionary
TASK_13_PROMPTS = {
    "basic": """
Ты - эксперт по проверке задач ЕГЭ по математике. Проанализируй решение тригонометрического уравнения.

Задача: {task_description}

Критерии оценки:
- 2 балла: Обоснованно получены верные ответы в обоих пунктах
- 1 балл: Обоснованно получен верный ответ в пункте а) ИЛИ получены неверные ответы из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения обоих пунктов
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Максимальный балл: 2

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ решения пункта а)
2. Анализ решения пункта б)
3. Итоговую оценку (0, 1 или 2 балла)
4. Обоснование выставленной оценки
""",
    "detailed": TASK_13_DETAILED_PROMPT,
    "with_examples": """
Ты - эксперт по проверке задач ЕГЭ по математике. Проанализируй решение тригонометрического уравнения.

Задача: {task_description}

Критерии оценки:
- 2 балла: Обоснованно получены верные ответы в обоих пунктах
- 1 балл: Обоснованно получен верный ответ в пункте а) ИЛИ получены неверные ответы из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения обоих пунктов
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Максимальный балл: 2

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ решения пункта а)
2. Анализ решения пункта б)
3. Итоговую оценку (0, 1 или 2 балла)
4. Обоснование выставленной оценки
""",
    "image_examples": TASK_13_IMAGE_EXAMPLES_PROMPT,
    "with_solution": TASK_13_DETAILED_WITH_SOLUTION
}

# Task 14 - Detailed prompt with task description + full correct solution + student solution
TASK_14_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 14 (стереометрическая задача) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 14
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Разные подходы к решению могут быть верными, если они математически обоснованы и приводят к правильному ответу

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для понимания задачи и правильного ответа
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Помни, что решение ученика может отличаться от эталонного по подходу и оформлению. Это нормально!
- Главное, чтобы решение было математически верным и приводило к правильному ответу
- Оценивай математическую корректность, а не точное совпадение с эталоном
- Проверь, что ответ ученика математически верный
- Если ответ ученика неверный, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке

## Инструкция по проверке пункта а)
1. Проверь корректность доказательства геометрического факта:
   - Правильность использования определений и теорем стереометрии
   - Логическую последовательность шагов доказательства
   - Обоснованность каждого шага
   - Полноту доказательства (все ли необходимые шаги выполнены)
2. Обрати внимание на типичные методы доказательства в стереометрии:
   - Использование векторов и координатного метода
   - Применение признаков параллельности и перпендикулярности
   - Использование подобия и равенства треугольников
   - Применение теорем о параллельных и перпендикулярных плоскостях

## Инструкция по проверке пункта б)
1. Проверь метод нахождения геометрической величины:
   - Правильность построения сечений (если требуется)
   - Корректность применения формул для вычисления длин, углов, площадей или объемов
   - Правильность использования тригонометрических соотношений
   - Обоснованность каждого шага вычислений
2. Проверь правильность вычислений:
   - Корректность арифметических операций
   - Правильность работы с корнями, дробями и иррациональными числами
   - Правильность упрощения итогового выражения

## Типичные ошибки, на которые следует обратить внимание
1. В пункте а):
   - Неполное доказательство (пропуск важных шагов)
   - Использование недоказанных фактов без обоснования
   - Логические ошибки в цепочке рассуждений
   - Неправильное применение теорем стереометрии
2. В пункте б):
   - Ошибки при построении сечений
   - Неправильное применение формул
   - Ошибки в тригонометрических вычислениях
   - Арифметические ошибки при расчетах

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадают ли ответы ученика с правильными ответами
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании геометрических соотношений

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на 2 балла.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на 0 баллов.

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В решении правильно доказано утверждение пункта а) с использованием свойств стереометрии и корректно найдена геометрическая величина в пункте б). Все шаги доказательства обоснованы, вычисления выполнены верно.

### Пример 2 (оценка: 2 балла)
В решении правильно доказано утверждение пункта а), но при решении пункта б) допущена арифметическая ошибка, приведшая к неверному ответу. Метод решения пункта б) выбран верно, но ошибка в вычислениях привела к неверному числовому результату.

### Пример 3 (оценка: 2 балла)
В решении не доказано или неверно доказано утверждение пункта а), но обоснованно получен верный ответ в пункте б). Все вычисления в пункте б) выполнены корректно, и получен правильный числовой ответ.

### Пример 4 (оценка: 1 балл)
В решении правильно доказано утверждение пункта а), но решение пункта б) отсутствует или выполнено полностью неверно. Доказательство пункта а) содержит все необходимые обоснования и логические шаги.

### Пример 5 (оценка: 1 балл)
В решении не доказано утверждение пункта а), но при решении пункта б) использовано это утверждение и получен верный ответ. Решение пункта б) математически корректно и опирается на утверждение из пункта а).

### Пример 6 (оценка: 0 баллов)
В решении неверно доказано утверждение пункта а) и неверно решен пункт б). Доказательство содержит логические ошибки, а вычисления в пункте б) приводят к неверному ответу.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 14 prompts dictionary
TASK_14_PROMPTS = {
    "basic": """
Ты - эксперт по проверке задач ЕГЭ по математике. Проанализируй решение стереометрической задачи.

Задача: {task_description}

Критерии оценки:
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Максимальный балл: 3

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ доказательства в пункте а)
2. Анализ решения в пункте б)
3. Итоговую оценку (0, 1, 2 или 3 балла)
4. Обоснование выставленной оценки
""",
    "detailed": TASK_14_DETAILED_PROMPT,
    "with_examples": TASK_14_WITH_EXAMPLES_PROMPT,
    "image_examples": TASK_14_IMAGE_EXAMPLES_PROMPT,
    "with_solution": TASK_14_DETAILED_WITH_SOLUTION
}



# Task 16 prompts dictionary
TASK_16_PROMPTS = {
    "basic": TASK_16_BASIC_PROMPT,
    "detailed": TASK_16_DETAILED_PROMPT,
    "with_solution": TASK_16_DETAILED_WITH_SOLUTION,
    "image_examples": TASK_16_IMAGE_EXAMPLES_PROMPT
}


# Specialized prompts for Task 15

TASK_15_DETAILED_PROMPT = """
Проанализируй решение задания 15 (неравенство) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 15
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Обоснованно получен ответ, отличающийся от верного из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое

## Инструкция по проверке решения неравенства
1. Проверь метод решения неравенства:
   - Корректность преобразований
   - Правильность применения формул и свойств неравенств
   - Полноту решения (все ли необходимые шаги выполнены)
   - Правильность учета ОДЗ (области допустимых значений)
2. Проверь правильность нахождения решения:
   - Корректность решения отдельных частей неравенства
   - Правильность объединения или пересечения множеств
   - Корректность записи ответа в виде числового промежутка или их объединения

## Типичные ошибки, на которые следует обратить внимание
1. Ошибки при работе с ОДЗ:
   - Неучет ОДЗ или неправильное его определение
   - Ошибки при пересечении ОДЗ с решением неравенства
2. Ошибки при преобразованиях:
   - Потеря решений при возведении в квадрат или умножении на выражение с переменной
   - Неправильное применение свойств логарифмов или показательных функций
   - Ошибки при раскрытии модулей
3. Вычислительные ошибки:
   - Арифметические ошибки
   - Ошибки при решении квадратных уравнений или неравенств
   - Ошибки при работе с дробями или иррациональными числами

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_15_BASIC_PROMPT = """
Проанализируй решение задания 15 (неравенство) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 15
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Обоснованно получен ответ, отличающийся от верного из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

ВАЖНО: Раздел с итоговой оценкой ОБЯЗАТЕЛЬНО оформи в формате:
### Итоговая оценка
[Оценка: X баллов]
где X - это число 0, 1 или 2
"""

# Task 15 - Detailed prompt with task description + full correct solution + student solution
TASK_15_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 15 (неравенство) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 15
- 2 балла: Обоснованно получен верный ответ
- 1 балл: Обоснованно получен ответ, отличающийся от верного из-за вычислительной ошибки, но при этом имеется верная последовательность всех шагов решения
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Сравни решение ученика с верным решением, которое предоставлено в качестве эталона
- Проверь, правильно ли ученик выполнил все ключевые шаги решения
- Если ученик использовал другой подход, оцени его корректность и соответствие критериям

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Помни, что решение ученика может отличаться от эталонного по подходу и оформлению. Это нормально!
- Главное, чтобы решение было математически верным и приводило к правильному ответу
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Если ученик использовал другой подход, проверь его корректность и соответствие математическим принципам
- Оценивай математическую корректность, а не точное совпадение с эталоном

## Инструкция по проверке решения неравенства
1. Проверь метод решения неравенства:
   - Корректность преобразований
   - Правильность применения формул и свойств неравенств
   - Полноту решения (все ли необходимые шаги выполнены)
   - Правильность учета ОДЗ (области допустимых значений)
2. Проверь правильность нахождения решения:
   - Корректность решения отдельных частей неравенства
   - Правильность объединения или пересечения множеств
   - Корректность записи ответа в виде числового промежутка или их объединения
3. Сравни решение ученика с верным решением:
   - Проверь, совпадает ли метод решения
   - Отметь любые отклонения от верного решения
   - Определи, являются ли ошибки (если есть) арифметическими или концептуальными

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом из эталонного решения
- Внимательно изучи верное решение, чтобы понять, какой ответ является правильным
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом
- Если ученик использовал другой метод решения, проверь, приводит ли он к тому же ответу, что и в эталонном решении

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании свойств неравенств

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на 1 балл.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на 0 баллов.

## Примеры оценивания

### Пример 1 (оценка: 2 балла)
В решении правильно применены методы решения неравенства, корректно выполнены все преобразования, учтена область допустимых значений, и получен верный ответ. Все шаги решения обоснованы и математически корректны.

### Пример 2 (оценка: 1 балл)
В решении правильно применены методы решения неравенства, но допущена вычислительная ошибка (например, при решении квадратного уравнения или при упрощении выражения), что привело к неверному ответу. При этом последовательность всех шагов решения верная.

### Пример 3 (оценка: 0 баллов)
В решении допущены концептуальные ошибки: неверно применены свойства неравенств (например, умножение обеих частей неравенства на отрицательное число без изменения знака неравенства), не учтена область допустимых значений, или использован принципиально неверный метод решения.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Сравнение с верным решением
[Сравнение подхода ученика с эталонным решением, указание на ключевые различия]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1 или 2
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 15 prompts dictionary
TASK_15_PROMPTS = {
    "basic": TASK_15_BASIC_PROMPT,
    "detailed": TASK_15_DETAILED_PROMPT,
    "with_solution": TASK_15_DETAILED_WITH_SOLUTION
}

# Specialized prompts for Task 17

TASK_17_DETAILED_PROMPT = """
Проанализируй решение задания 17 (планиметрическая задача с доказательством) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 17
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Доказательство геометрического факта должно быть полным и математически корректным
- Вычисления должны быть обоснованными и опираться на верные геометрические факты
- Арифметическая ошибка - это ошибка в вычислениях при верном ходе решения

## Инструкция по проверке доказательства (пункт а)
1. Проверь полноту доказательства:
   - Все ли утверждения обоснованы
   - Нет ли пропущенных логических шагов
   - Корректно ли применены теоремы и свойства геометрических фигур
2. Проверь математическую корректность:
   - Правильно ли применены свойства вписанных фигур
   - Корректно ли использованы признаки равенства/подобия фигур
   - Верно ли применены свойства параллельности, перпендикулярности и т.д.

## Инструкция по проверке вычислений (пункт б)
1. Проверь метод решения:
   - Корректность применения формул и теорем
   - Правильность построения математической модели
2. Проверь вычисления:
   - Правильность алгебраических преобразований
   - Отсутствие арифметических ошибок
3. Проверь использование доказанного в пункте а:
   - Если решение пункта б опирается на утверждение из пункта а, проверь корректность этой связи

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ доказательства с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ вычислений с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_17_BASIC_PROMPT = """
Проанализируй решение задания 17 (планиметрическая задача с доказательством).

## Задача
{task_description}

## Критерии оценивания задания 17
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ доказательства геометрического факта (пункт а)
2. Анализ вычислений геометрической величины (пункт б)
3. Итоговую оценку (0, 1, 2 или 3 балла)
4. Обоснование выставленной оценки

ВАЖНО: Раздел с итоговой оценкой ОБЯЗАТЕЛЬНО оформи в формате:
### Итоговая оценка
[Оценка: X баллов]
где X - это число 0, 1, 2 или 3
"""

# Task 17 - Detailed prompt with task description + full correct solution + student solution
TASK_17_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 17 (планиметрическая задача с доказательством) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 17
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Сравни решение ученика с верным решением, которое предоставлено в качестве эталона
- Проверь, правильно ли ученик выполнил все ключевые шаги решения
- Если ученик использовал другой подход, оцени его корректность и соответствие критериям

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на корректность доказательства в пункте а
- Проверь, правильно ли вычислена геометрическая величина в пункте б

## Инструкция по проверке доказательства (пункт а)
1. Проверь полноту доказательства:
   - Все ли утверждения обоснованы
   - Нет ли пропущенных логических шагов
   - Корректно ли применены теоремы и свойства геометрических фигур
2. Проверь математическую корректность:
   - Правильно ли применены свойства вписанных фигур
   - Корректно ли использованы признаки равенства/подобия фигур
   - Верно ли применены свойства параллельности, перпендикулярности и т.д.

## Инструкция по проверке вычислений (пункт б)
1. Проверь метод решения:
   - Корректность применения формул и теорем
   - Правильность построения математической модели
2. Проверь вычисления:
   - Правильность алгебраических преобразований
   - Отсутствие арифметических ошибок
3. Проверь использование доказанного в пункте а:
   - Если решение пункта б опирается на утверждение из пункта а, проверь корректность этой связи

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай арифметические и концептуальные ошибки
- Арифметические ошибки: ошибки в вычислениях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании геометрических свойств

Если ученик допустил только арифметические ошибки в пункте б, но метод решения верный и доказательство в пункте а верное - это может соответствовать критерию на 2 балла.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на более низкий балл.

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В решении правильно доказано утверждение пункта а) с использованием свойств вписанных фигур и корректно найдена геометрическая величина в пункте б). Все шаги доказательства обоснованы, вычисления выполнены верно.

### Пример 2 (оценка: 2 балла)
В решении правильно доказано утверждение пункта а), но при решении пункта б) допущена арифметическая ошибка, приведшая к неверному ответу. Метод решения пункта б) выбран верно, но ошибка в вычислениях привела к неверному числовому результату.

### Пример 3 (оценка: 2 балла)
В решении не доказано или неверно доказано утверждение пункта а), но обоснованно получен верный ответ в пункте б). Все вычисления в пункте б) выполнены корректно, и получен правильный числовой ответ.

### Пример 4 (оценка: 1 балл)
В решении правильно доказано утверждение пункта а), но решение пункта б) отсутствует или выполнено полностью неверно. Доказательство пункта а) содержит все необходимые обоснования и логические шаги.

### Пример 5 (оценка: 1 балл)
В решении не доказано утверждение пункта а), но при решении пункта б) использовано это утверждение и получен верный ответ. Решение пункта б) математически корректно и опирается на утверждение из пункта а).

### Пример 6 (оценка: 0 баллов)
В решении неверно доказано утверждение пункта а) и неверно решен пункт б). Доказательство содержит логические ошибки, а вычисления в пункте б) приводят к неверному ответу.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ доказательства с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ вычислений с указанием правильных шагов и ошибок]

### Сравнение с верным решением
[Сравнение подхода ученика с эталонным решением, указание на ключевые различия]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 17 - Original with solution prompt
TASK_17_WITH_SOLUTION_PROMPT = """
Проанализируй решение задания 17 (планиметрическая задача с доказательством) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 17
- 3 балла: Имеется верное доказательство утверждения пункта а и обоснованно получен верный ответ в пункте б
- 2 балла: Обоснованно получен верный ответ в пункте б ИЛИ имеется верное доказательство утверждения пункта а и при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на корректность доказательства в пункте а
- Проверь, правильно ли вычислена геометрическая величина в пункте б

## Инструкция по проверке доказательства (пункт а)
1. Проверь полноту доказательства:
   - Все ли утверждения обоснованы
   - Нет ли пропущенных логических шагов
   - Корректно ли применены теоремы и свойства геометрических фигур
2. Проверь математическую корректность:
   - Правильно ли применены свойства вписанных фигур
   - Корректно ли использованы признаки равенства/подобия фигур
   - Верно ли применены свойства параллельности, перпендикулярности и т.д.

## Инструкция по проверке вычислений (пункт б)
1. Проверь метод решения:
   - Корректность применения формул и теорем
   - Правильность построения математической модели
2. Проверь вычисления:
   - Правильность алгебраических преобразований
   - Отсутствие арифметических ошибок
3. Проверь использование доказанного в пункте а:
   - Если решение пункта б опирается на утверждение из пункта а, проверь корректность этой связи

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ доказательства с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ вычислений с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_17_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 17 (планиметрическая задача с доказательством) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 17
- 3 балла: Обоснованно получены верные ответы в обоих пунктах
- 2 балла: Обоснованно получен верный ответ в пункте б) с использованием утверждения пункта а), при этом пункт а) не выполнен, ИЛИ получен обоснованно верный ответ в пункте а) и допущена вычислительная ошибка в пункте б)
- 1 балл: Имеется верное доказательство утверждения пункта а, ИЛИ при обоснованном решении пункта б получен неверный ответ из-за арифметической ошибки, ИЛИ обоснованно получен верный ответ в пункте б с использованием утверждения пункта а, при этом пункт а не выполнен
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Доказательство геометрического факта должно быть полным и математически корректным
- Вычисления должны быть обоснованными и опираться на верные геометрические факты
- Арифметическая ошибка - это ошибка в вычислениях при верном ходе решения

## КРИТИЧЕСКИ ВАЖНО: Проверка на логические ошибки в доказательстве
- Внимательно проверяй, не содержит ли доказательство КРУГОВЫХ РАССУЖДЕНИЙ, когда ученик использует то, что требуется доказать
- Особенно обрати внимание на случаи, когда ученик:
  1. Использует параллельность прямых BH и ED при доказательстве пункта а), когда именно это требуется доказать
  2. Использует равенство углов, которое возможно только при параллельности прямых, которую нужно доказать
  3. Опирается на условие из пункта б) при доказательстве пункта а)
  4. Заменяет углы без обоснования (например, ∠EOₐA углом ∠BHA), что возможно только при доказанной параллельности

### Основные принципы:
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление

### Критерии для оценки в 3 балла:
- Если ученик верно доказал утверждение в пункте а) И обоснованно получил верный ответ в пункте б), ставь 3 балла
- Если в решении есть небольшие недочеты, но они не влияют на правильность ответа, это не должно снижать оценку

### Критерии для оценки в 2 балла:
- Если ученик обоснованно получил верный ответ ТОЛЬКО в пункте б), ставь 2 балла
- ИЛИ если ученик верно доказал утверждение в пункте а) и при обоснованном решении пункта б) получил неверный ответ из-за арифметической ошибки, ставь 2 балла

### Критерии для оценки в 1 балл:
- Если ученик верно доказал ТОЛЬКО утверждение в пункте а), ставь 1 балл
- ИЛИ если при обоснованном решении пункта б) получен неверный ответ из-за арифметической ошибки, ставь 1 балл
- ИЛИ если обоснованно получен верный ответ в пункте б) с использованием утверждения пункта а), при этом пункт а) не выполнен, ставь 1 балл

### Критерии для оценки в 0 баллов:
- Если решение не соответствует ни одному из критериев, перечисленных выше, ставь 0 баллов
- Если доказательство пункта а) содержит логические ошибки (круговые рассуждения), ставь 0 баллов за пункт а)

## Примеры оценивания

### Пример 1 (оценка: 3 балла)
В решении правильно доказано утверждение пункта а) с использованием свойств вписанных фигур и корректно найдена геометрическая величина в пункте б). Все шаги доказательства обоснованы, вычисления выполнены верно.

### Пример 2 (оценка: 2 балла)
В решении правильно доказано утверждение пункта а), но при решении пункта б) допущена арифметическая ошибка, приведшая к неверному ответу. Метод решения пункта б) выбран верно, но ошибка в вычислениях привела к неверному числовому результату.

### Пример 3 (оценка: 2 балла)
В решении не доказано или неверно доказано утверждение пункта а), но обоснованно получен верный ответ в пункте б). Все вычисления в пункте б) выполнены корректно, и получен правильный числовой ответ.

### Пример 4 (оценка: 1 балл)
В решении правильно доказано утверждение пункта а), но решение пункта б) отсутствует или выполнено полностью неверно. Доказательство пункта а) содержит все необходимые обоснования и логические шаги.

### Пример 5 (оценка: 1 балл)
В решении не доказано утверждение пункта а), но при решении пункта б) использовано это утверждение и получен верный ответ. Решение пункта б) математически корректно и опирается на утверждение из пункта а).

### Пример 6 (оценка: 0 баллов)
В решении неверно доказано утверждение пункта а) и неверно решен пункт б). Доказательство содержит логические ошибки, а вычисления в пункте б) приводят к неверному ответу.

### Пример 7 (оценка: 0 баллов)
В решении пункта а) содержится круговое рассуждение: ученик использует параллельность прямых BH и ED (или следствия из этой параллельности) для доказательства самой параллельности. Такое доказательство некорректно, даже если пункт б) решен верно.

### Пример 8 (оценка: 0 баллов)
В решении пункта а) ученик опирается на условие из пункта б) (использует значение угла BCD = 120°), что делает доказательство некорректным. Доказательство пункта а) должно быть общим, без использования конкретных числовых значений из пункта б).

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ доказательства с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ вычислений с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2 или 3
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Specialized prompts for Task 18

TASK_18_DETAILED_PROMPT = """
Проанализируй решение задания 18 (уравнение, неравенство или их системы с параметром) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 18
- 4 балла: Обоснованно получен верный ответ
- 3 балла: С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ
- 2 балла: С помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек ИЛИ получен неверный ответ из-за вычислительной ошибки, но при этом верно выполнены все шаги решения
- 1 балл: Получены корни уравнения и задача верно сведена к исследованию полученных корней при условии (условиях)
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Задачи с параметром допускают разнообразные способы решения: алгебраический, геометрический, функциональный
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- ОСОБОЕ ВНИМАНИЕ уделяй правильности обработки граничных точек и полноте рассмотрения всех случаев
- При оценке на 3 балла: проверь, что отличие от верного ответа ТОЛЬКО в граничных точках, а не в основных промежутках
- При геометрическом подходе: проверь корректность интерпретации и обоснованность всех геометрических утверждений

## Примеры оценивания

### Пример 1 (оценка: 4 балла)
Решение полное и обоснованное. Верно найдены все значения параметра, при которых система имеет ровно два решения. Все случаи рассмотрены, граничные точки корректно проанализированы.

### Пример 2 (оценка: 3 балла)
В решении присутствуют все этапы. С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ. Например, получен ответ (-2,2) вместо [-2,2] или [-2,-1)∪(-1,1)∪(1,2] вместо [-2,-1)∪(-1,1)∪[1,2].

### Пример 3 (оценка: 2 балла)
Решение логично, все шаги присутствуют, но при решении неравенства допущена ошибка вычислительного характера, что привело к неверному ответу. Или с помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек, но не учтены все возможные случаи.

### Пример 4 (оценка: 1 балл)
В решении получены корни уравнения и задача верно сведена к исследованию полученных корней при условии x²+ax+1≥0, но дальнейшее исследование выполнено неверно или отсутствует.

### Пример 5 (оценка: 0 баллов)
В решении допущены принципиальные ошибки в понимании задачи или в математических рассуждениях. Например, неверно найдены корни исходного уравнения или неверно интерпретировано условие задачи.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## ВАЖНО: Особенности оценки геометрического подхода
При геометрическом подходе к решению:
1. Проверь корректность геометрической интерпретации условий задачи
2. Убедись, что все геометрические утверждения обоснованы
3. Проверь полноту анализа всех возможных взаимных расположений геометрических объектов
4. Особое внимание обрати на обоснование случаев касания и пересечения

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_18_BASIC_PROMPT = """
Проанализируй решение задания 18 (уравнение, неравенство или их системы с параметром).

## Задача
{task_description}

## Критерии оценивания задания 18
- 4 балла: Обоснованно получен верный ответ
- 3 балла: С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ
- 2 балла: С помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек ИЛИ получен неверный ответ из-за вычислительной ошибки, но при этом верно выполнены все шаги решения
- 1 балл: Получены корни уравнения и задача верно сведена к исследованию полученных корней при условии (условиях)
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Задачи с параметром допускают разнообразные способы решения
- ОСОБОЕ ВНИМАНИЕ уделяй правильности обработки граничных точек и полноте рассмотрения всех случаев
- При оценке на 3 балла: проверь, что отличие от верного ответа ТОЛЬКО в граничных точках, а не в основных промежутках

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ решения с указанием правильных шагов и ошибок
2. Итоговую оценку (0, 1, 2, 3 или 4 балла)
3. Обоснование выставленной оценки

ВАЖНО: Раздел с итоговой оценкой ОБЯЗАТЕЛЬНО оформи в формате:
### Итоговая оценка
[Оценка: X баллов]
где X - это число 0, 1, 2, 3 или 4
"""

# Task 18 - Detailed prompt with task description + full correct solution + student solution
TASK_18_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 18 (уравнение, неравенство или их системы с параметром) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 18
- 4 балла: Обоснованно получен верный ответ
- 3 балла: С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ
- 2 балла: С помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек ИЛИ получен неверный ответ из-за вычислительной ошибки, но при этом верно выполнены все шаги решения
- 1 балл: Получены корни уравнения и задача верно сведена к исследованию полученных корней при условии (условиях)
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Сравни решение ученика с верным решением, которое предоставлено в качестве эталона
- Проверь, правильно ли ученик выполнил все ключевые шаги решения
- Если ученик использовал другой подход, оцени его корректность и соответствие критериям
- Задачи с параметром допускают разнообразные способы решения: алгебраический, геометрический, функциональный
- ОСОБОЕ ВНИМАНИЕ уделяй правильности обработки граничных точек и полноте рассмотрения всех случаев
- При оценке на 3 балла: проверь, что отличие от верного ответа ТОЛЬКО в граничных точках, а не в основных промежутках
- При геометрическом подходе: проверь корректность интерпретации и обоснованность всех геометрических утверждений

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на обработку граничных точек и полноту рассмотрения всех случаев

## Инструкция по проверке решения задачи с параметром
1. Проверь метод решения:
   - Корректность выбранного подхода (алгебраический, геометрический, функциональный)
   - Правильность применения формул и теорем
   - Полноту рассмотрения всех случаев
2. Проверь математическую корректность:
   - Правильность алгебраических преобразований
   - Корректность работы с неравенствами
   - Правильность нахождения ОДЗ (области допустимых значений)
3. Проверь работу с граничными точками:
   - Корректность определения граничных точек
   - Правильность включения/исключения граничных точек в ответ
4. При геометрическом подходе проверь:
   - Корректность геометрической интерпретации условий
   - Обоснованность всех геометрических утверждений
   - Полноту анализа всех возможных взаимных расположений геометрических объектов

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадает ли ответ ученика с правильным ответом
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за невычислительной ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответом ученика и правильным ответом

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение формул, неверный метод решения, ошибки в понимании свойств параметра

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на 2 балла.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на более низкий балл.

## Примеры оценивания

### Пример 1 (оценка: 4 балла)
Решение полное и обоснованное. Верно найдены все значения параметра, при которых система имеет ровно два решения. Все случаи рассмотрены, граничные точки корректно проанализированы.

### Пример 2 (оценка: 3 балла)
В решении присутствуют все этапы. С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ. Например, получен ответ (-2,2) вместо [-2,2] или [-2,-1)∪(-1,1)∪(1,2] вместо [-2,-1)∪(-1,1)∪[1,2].

### Пример 3 (оценка: 2 балла)
Решение логично, все шаги присутствуют, но при решении неравенства допущена ошибка вычислительного характера, что привело к неверному ответу. Или с помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек, но не учтены все возможные случаи.

### Пример 4 (оценка: 1 балл)
В решении получены корни уравнения и задача верно сведена к исследованию полученных корней при условии x²+ax+1≥0, но дальнейшее исследование выполнено неверно или отсутствует.

### Пример 5 (оценка: 0 баллов)
В решении допущены принципиальные ошибки в понимании задачи или в математических рассуждениях. Например, неверно найдены корни исходного уравнения или неверно интерпретировано условие задачи.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Сравнение с верным решением
[Сравнение подхода ученика с эталонным решением, указание на ключевые различия]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 18 - Original with solution prompt
TASK_18_WITH_SOLUTION_PROMPT = """
Проанализируй решение задания 18 (уравнение, неравенство или их системы с параметром) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 18
- 4 балла: Обоснованно получен верный ответ
- 3 балла: С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ
- 2 балла: С помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек ИЛИ получен неверный ответ из-за вычислительной ошибки, но при этом верно выполнены все шаги решения
- 1 балл: Получены корни уравнения и задача верно сведена к исследованию полученных корней при условии (условиях)
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Задачи с параметром допускают разнообразные способы решения: алгебраический, геометрический, функциональный
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- ОСОБОЕ ВНИМАНИЕ уделяй правильности обработки граничных точек и полноте рассмотрения всех случаев
- При оценке на 3 балла: проверь, что отличие от верного ответа ТОЛЬКО в граничных точках, а не в основных промежутках
- При геометрическом подходе: проверь корректность интерпретации и обоснованность всех геометрических утверждений

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на обработку граничных точек и полноту рассмотрения всех случаев

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_18_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 18 (уравнение, неравенство или их системы с параметром) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 18
- 4 балла: Обоснованно получен верный ответ
- 3 балла: С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ
- 2 балла: С помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек ИЛИ получен неверный ответ из-за вычислительной ошибки, но при этом верно выполнены все шаги решения
- 1 балл: Получены корни уравнения и задача верно сведена к исследованию полученных корней при условии (условиях)
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Задачи с параметром допускают разнообразные способы решения: алгебраический, геометрический, функциональный
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- ОСОБОЕ ВНИМАНИЕ уделяй правильности обработки граничных точек и полноте рассмотрения всех случаев
- При оценке на 3 балла: проверь, что отличие от верного ответа ТОЛЬКО в граничных точках, а не в основных промежутках
- При геометрическом подходе: проверь корректность интерпретации и обоснованность всех геометрических утверждений

## ВАЖНО: Особенности оценки геометрического подхода
При геометрическом подходе к решению:
1. Проверь корректность геометрической интерпретации условий задачи (например, правильно ли определены геометрические объекты)
2. Убедись, что все геометрические утверждения обоснованы (например, условия касания, пересечения)
3. Проверь полноту анализа всех возможных взаимных расположений геометрических объектов
4. Особое внимание обрати на обоснование случаев касания и пересечения
5. Проверь, что все значения параметра, соответствующие ровно двум решениям, найдены и обоснованы

## Примеры оценивания

### Пример 1 (оценка: 4 балла)
Решение полное и обоснованное. Верно найдены все значения параметра, при которых система имеет ровно два решения. Все случаи рассмотрены, граничные точки корректно проанализированы. При геометрическом подходе правильно интерпретированы все объекты и их взаимное расположение, обоснованы все случаи пересечения и касания.

### Пример 2 (оценка: 3 балла)
В решении присутствуют все этапы. С помощью верного рассуждения получено множество значений параметра, отличающееся от искомого только исключением граничных точек или включением точек, не входящих в ответ. Например, получен ответ (-2,2) вместо [-2,2] или [-2,-1)∪(-1,1)∪(1,2] вместо [-2,-1)∪(-1,1)∪[1,2]. При геометрическом подходе правильно определены все случаи, но не обоснованы некоторые граничные значения.

### Пример 3 (оценка: 2 балла)
Решение логично, все шаги присутствуют, но при решении неравенства допущена ошибка вычислительного характера, что привело к неверному ответу. Или с помощью верного рассуждения получен промежуток множества значений параметра, возможно, с включением граничных точек, но не учтены все возможные случаи. При геометрическом подходе верно определены геометрические объекты, но анализ их взаимного расположения неполный.

### Пример 4 (оценка: 1 балл)
В решении получены корни уравнения и задача верно сведена к исследованию полученных корней при условии, но дальнейшее исследование выполнено неверно или отсутствует. При геометрическом подходе верно определены геометрические объекты, но анализ их взаимного расположения отсутствует или содержит принципиальные ошибки.

### Пример 5 (оценка: 0 баллов)
В решении допущены принципиальные ошибки в понимании задачи или в математических рассуждениях. Например, неверно найдены корни исходного уравнения или неверно интерпретировано условие задачи. При геометрическом подходе неверно определены геометрические объекты или их свойства.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Specialized prompts for Task 19

TASK_19_DETAILED_PROMPT = """
Проанализируй решение задания 19 (задача по теории чисел) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 19
- 4 балла: Обоснованно получены верные ответы в пунктах а, б и в
- 3 балла: Обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в пункте а или б
- 2 балла: Обоснованно получены верные ответы в пунктах а и б ИЛИ обоснованно получен верный ответ в пункте в
- 1 балл: Обоснованно получен верный ответ в пункте а или б
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Для получения баллов решение должно быть обоснованным
- Проверяй каждый пункт (а, б, в) отдельно и затем определяй итоговую оценку

## Требования к анализу
Твой анализ должен содержать:
1. Подробный разбор решения каждого пункта (а, б, в) с указанием всех правильных шагов и ошибок
2. Оценку правильности ответа для каждого пункта
3. Итоговую оценку (0, 1, 2, 3 или 4 балла) с подробным обоснованием
4. Рекомендации по исправлению ошибок (если есть)

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок по каждому пункту]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_19_BASIC_PROMPT = """
Проанализируй решение задания 19 (задача по теории чисел).

## Задача
{task_description}

## Критерии оценивания задания 19
- 4 балла: Обоснованно получены верные ответы в пунктах а, б и в
- 3 балла: Обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в пункте а или б
- 2 балла: Обоснованно получены верные ответы в пунктах а и б ИЛИ обоснованно получен верный ответ в пункте в
- 1 балл: Обоснованно получен верный ответ в пункте а или б
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

Проанализируй решение и оцени его по указанным критериям. Предоставь подробное обоснование своей оценки, указав на конкретные элементы решения.

Твой ответ должен содержать:
1. Анализ решения каждого пункта (а, б, в)
2. Итоговую оценку (0, 1, 2, 3 или 4 балла)
3. Обоснование выставленной оценки

ВАЖНО: Раздел с итоговой оценкой ОБЯЗАТЕЛЬНО оформи в формате:
### Итоговая оценка
[Оценка: X баллов]
где X - это число 0, 1, 2, 3 или 4
"""

# Task 19 - Detailed prompt with task description + full correct solution + student solution
TASK_19_DETAILED_WITH_SOLUTION = """
Проанализируй решение задания 19 (задача по теории чисел) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 19
- 4 балла: Обоснованно получены верные ответы в пунктах а, б и в
- 3 балла: Обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в пункте а или б
- 2 балла: Обоснованно получены верные ответы в пунктах а и б ИЛИ обоснованно получен верный ответ в пункте в
- 1 балл: Обоснованно получен верный ответ в пункте а или б
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Сравни решение ученика с верным решением, которое предоставлено в качестве эталона
- Проверь, правильно ли ученик выполнил все ключевые шаги решения
- Если ученик использовал другой подход, оцени его корректность и соответствие критериям

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на обоснованность каждого пункта решения

## Инструкция по проверке задачи по теории чисел
1. Проверь понимание условия задачи:
   - Правильно ли ученик интерпретировал условие
   - Корректно ли определены переменные и их взаимосвязи
2. Проверь математическую корректность:
   - Правильность применения свойств делимости
   - Корректность алгебраических преобразований
   - Полноту рассмотрения всех случаев
3. Проверь обоснованность каждого пункта:
   - Пункт а: правильность нахождения наименьшего значения
   - Пункт б: правильность нахождения наибольшего значения
   - Пункт в: правильность нахождения количества значений или суммы
4. Проверь логическую связь между пунктами:
   - Согласованность решений разных пунктов
   - Использование результатов предыдущих пунктов

## КРИТИЧЕСКИ ВАЖНО: Сразу сравнивай ответы ученика с правильными!
- В ПЕРВУЮ ОЧЕРЕДЬ проверь, совпадают ли ответы ученика с правильными ответами по каждому пункту
- Если ответ ученика НЕВЕРНЫЙ, это ОБЯЗАТЕЛЬНО должно быть учтено в оценке
- Даже если все преобразования выполнены верно, но ответ неправильный из-за неарифметической ошибки - это должно влиять на оценку
- Не забудь отметить все расхождения между ответами ученика и правильными ответами

## ВАЖНО: Различай вычислительные и концептуальные ошибки
- Вычислительные ошибки: ошибки в арифметических операциях, упрощении выражений, вычислении значений
- Концептуальные ошибки: неправильное применение свойств делимости, неверный метод решения, ошибки в понимании теории чисел

Если ученик допустил только вычислительные ошибки, но метод решения верный - это может соответствовать критерию на более высокий балл.
Если ученик допустил концептуальные ошибки - это обычно соответствует критерию на более низкий балл.

## Примеры оценивания

### Пример 1 (оценка: 4 балла)
В этом решении обоснованно получены верные ответы во всех трех пунктах (а, б, в). Ученик корректно проанализировал условия задачи, построил математическую модель и получил правильные ответы с полным обоснованием.

### Пример 2 (оценка: 3 балла)
В этом решении обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в одном из пунктов а или б. Например, ученик верно решил пункты а и в, но допустил ошибку в пункте б.

### Пример 3 (оценка: 2 балла)
В этом решении обоснованно получены верные ответы в пунктах а и б, но пункт в не решен или решен неверно. Или обоснованно получен верный ответ только в пункте в.

### Пример 4 (оценка: 1 балл)
В этом решении обоснованно получен верный ответ только в одном из пунктов а или б, а остальные пункты не решены или решены неверно.

### Пример 5 (оценка: 0 баллов)
В этом решении не получен обоснованно верный ответ ни в одном из пунктов, или решение отсутствует.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения пункта а)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта б)
[Подробный анализ с указанием правильных шагов и ошибок]

### Анализ решения пункта в)
[Подробный анализ с указанием правильных шагов и ошибок]

### Сравнение с верным решением
[Сравнение подхода ученика с эталонным решением, указание на ключевые различия]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 19 - Original with solution prompt
TASK_19_WITH_SOLUTION_PROMPT = """
Проанализируй решение задания 19 (задача по теории чисел) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 19
- 4 балла: Обоснованно получены верные ответы в пунктах а, б и в
- 3 балла: Обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в пункте а или б
- 2 балла: Обоснованно получены верные ответы в пунктах а и б ИЛИ обоснованно получен верный ответ в пункте в
- 1 балл: Обоснованно получен верный ответ в пункте а или б
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое

## ВАЖНО: Инструкция по работе с верным решением и решением ученика
Тебе предоставлены:
1. Верное решение задачи - используй его как эталон для сравнения
2. Решение ученика - это то, что ты должен оценить

При анализе:
- Сравнивай каждый шаг решения ученика с соответствующим шагом верного решения
- Отмечай все отклонения и ошибки
- Проверяй, совпадают ли промежуточные и итоговые результаты
- Обрати особое внимание на обоснованность каждого пункта решения

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение (верное или ученика) представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок по каждому пункту]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

TASK_19_IMAGE_EXAMPLES_PROMPT = """
Проанализируй решение задания 19 (задача по теории чисел) и оцени его в соответствии с критериями.

## Задача
{task_description}

## Критерии оценивания задания 19
- 4 балла: Обоснованно получены верные ответы в пунктах а, б и в
- 3 балла: Обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в пункте а или б
- 2 балла: Обоснованно получены верные ответы в пунктах а и б ИЛИ обоснованно получен верный ответ в пункте в
- 1 балл: Обоснованно получен верный ответ в пункте а или б
- 0 баллов: Решение не соответствует ни одному из критериев, перечисленных выше

## ВАЖНО: Принципы оценивания
- Оценивай решение СТРОГО по критериям, а не по сравнению с "идеальным" решением
- Обращай внимание на математическую корректность, а не на оформление
- Если решение состоит из нескольких изображений, анализируй их как единое целое
- Для получения баллов решение должно быть обоснованным

## Примеры оценивания

### Пример 1 (оценка: 4 балла)
В этом решении обоснованно получены верные ответы во всех трех пунктах (а, б, в). Ученик корректно проанализировал условия задачи, построил математическую модель и получил правильные ответы с полным обоснованием.

### Пример 2 (оценка: 3 балла)
В этом решении обоснованно получен верный ответ в пункте в и обоснованно получен верный ответ в одном из пунктов а или б. Например, ученик верно решил пункты а и в, но допустил ошибку в пункте б.

### Пример 3 (оценка: 2 балла)
В этом решении обоснованно получены верные ответы в пунктах а и б, но пункт в не решен или решен неверно. Или обоснованно получен верный ответ только в пункте в.

### Пример 4 (оценка: 1 балл)
В этом решении обоснованно получен верный ответ только в одном из пунктов а или б, а остальные пункты не решены или решены неверно.

### Пример 5 (оценка: 0 баллов)
В этом решении не получен обоснованно верный ответ ни в одном из пунктов, или решение отсутствует.

## ВАЖНО: Инструкция по работе с несколькими изображениями
Если решение ученика представлено несколькими изображениями:
1. Рассматривай все изображения как единое решение
2. Анализируй их в порядке следования
3. Учитывай информацию со всех изображений при оценке

## Формат ответа
Структурируй свой ответ следующим образом:

### Анализ решения
[Подробный анализ с указанием правильных шагов и ошибок по каждому пункту]

### Итоговая оценка
[Оценка: X баллов]

ВАЖНО: Раздел "Итоговая оценка" ОБЯЗАТЕЛЬНО должен быть оформлен ТОЧНО в таком формате:
"### Итоговая оценка" - заголовок
"[Оценка: X баллов]" - где X это число 0, 1, 2, 3 или 4
НЕ ИЗМЕНЯЙ этот формат и не добавляй к нему никакой другой текст!

### Обоснование оценки
[Подробное обоснование в соответствии с критериями]

### Рекомендации (если применимо)
[Рекомендации по исправлению ошибок]
"""

# Task 17 prompts dictionary
TASK_17_PROMPTS = {
    "basic": TASK_17_BASIC_PROMPT,
    "detailed": TASK_17_DETAILED_PROMPT,
    "with_solution": TASK_17_DETAILED_WITH_SOLUTION,
    "image_examples": TASK_17_IMAGE_EXAMPLES_PROMPT
}

# Task 18 prompts dictionary
TASK_18_PROMPTS = {
    "basic": TASK_18_BASIC_PROMPT,
    "detailed": TASK_18_DETAILED_PROMPT,
    "with_solution": TASK_18_DETAILED_WITH_SOLUTION,
    "image_examples": TASK_18_IMAGE_EXAMPLES_PROMPT
}

# Task 19 prompts dictionary
TASK_19_PROMPTS = {
    "basic": TASK_19_BASIC_PROMPT,
    "detailed": TASK_19_DETAILED_PROMPT,
    "with_solution": TASK_19_DETAILED_WITH_SOLUTION,
    "image_examples": TASK_19_IMAGE_EXAMPLES_PROMPT
}